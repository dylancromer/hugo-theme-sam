| {{ partial "head.html" . }}

body
    | 
    script(src="/js/jquery-migrate-1.4.1.min.js")
    script(src="/swipebox/js/jquery.swipebox.min.js")
    link(rel="stylesheet" href="/swipebox/css/swipebox.min.css")
    |
    link(rel='stylesheet' href='/justified_gallery/justifiedGallery.css')
    script(src="/justified_gallery/jquery.justifiedGallery.js")
    script.
      $( document ).ready(function() {
          $("#gallery").justifiedGallery({
            rowHeight : {{ .Site.Params.galleryRowHeight | default 200}},
            margins : {{ .Site.Params.galleryMargins | default 5}},
            border : 0,
          })
          .on('jg.complete', function () {
      	    $('.galleryImg').swipebox();
      		});
        });
    .wrap
        .section#content
            h1 {{ .Title }}
            | {{ .Content }}
        |
        div#gallery
            |
            | {{ $name := .Site.Params.galleryFolder | default "images/"}}
            | {{ $path := "gallery/" }}
            | {{ $content := "/content/" }}
            | {{ $src := (print $path $name) }}
            |
            | {{ $folder := (print $content $path $name) }}
            |
            | {{ $files := readDir $folder }}
            |
            | {{ if .Site.Params.clickablePhotos }}
            | {{ range shuffle $files }}
            |
            div
                |
                a(href='{{ $src | absURL }}{{.Name }}' class="galleryImg")
                    img(src='{{ $src | absURL }}{{ .Name }}' alt='{{ .Name }}')
            |
            | {{ end }}
            | {{ else }}
            | {{ range shuffle $files }}
            |
            div
                img(src='{{ $src | absURL }}{{ .Name }}' alt='{{ .Name }}')
            | {{ end }}
            |
            | {{ end }}
        |
        | {{ if .Site.Params.mainMenu }}
        .section.bottom-menu
            | {{ partial "bottom_menu.html" (dict "Page" . "show_back_menu_item" false) }}
        | {{ end }}
        .section.footer
            | {{ partial "footer.html" . }}
